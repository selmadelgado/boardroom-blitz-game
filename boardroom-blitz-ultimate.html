<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Boardroom Blitz: Ultimate Memory Match</title>

  <style>
  * { margin:0; padding:0; box-sizing:border-box; }
body {
  font-family: 'Segoe UI', Arial, sans-serif;
  background: #e0e0e0;
  text-align: center;
  padding: 20px;
  margin: 0;
}
  h1 {
  color: #1a5276;
  font-size: 2.2em;
  font-weight: 700;
  margin: 20px 0 10px;
}
#timer {
  font-weight: bold;
  color: #1a5276;
  font-size: 1.4em;
  margin-bottom: 20px;
}
#game {
  display: flex;
  flex-wrap: wrap;
  gap: 12px; /* Slightly smaller gap */
  justify-content: center;
  max-width: 1100px; /* +100px width */
  margin: 0 auto;
  padding: 10px;
}
  
.card {
  flex: 0 0 calc(14.28% - 12px); /* LARGER: 7-col instead of 6, more room */
  aspect-ratio: 1;
  position: relative;
  border-radius: 16px;
  box-shadow: 0 6px 16px rgba(0,0,0,0.15);
  overflow: hidden;
  cursor: pointer;
  transition: all 0.4s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  background: white;
}

.card.hidden {
  background: #2c3e50;
  transform: scale(0.95);
}

.card.matched {
  opacity: 0;
  transform: scale(0.8);
  transition: all 0.6s ease;
}

.card .text {
  padding: 20px; /* +4px padding = bigger text area */
  text-align: center;
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
  justify-content: center;
  gap: 4px;
  color: #1a5276;
}

.card .text strong {
  font-size: 1.40em; /* ← JUST 0.05em smaller — NO BLEED */
  font-weight: 800;
  color: #1a5276;
  line-height: 1.0; /* ← Pulls lines together */
  word-break: break-word; /* Break long words */
}

.card .text span {
  font-size: 0.85em; /* Smaller companies fit better */
  color: #1a5276;
  font-weight: 600;
  line-height: 1.1;
}
  
  .card img { 
    width:100%; 
    height:100%; 
    object-fit:cover; 
    border-radius:12px; 
    display:block;
  }
  
  /* TEXT CARDS: ALWAYS WHITE BACKGROUND */
  .card.text-card {
    background:#fff !important;
    color:#1a5276 !important;
  }
  
  .card.visible:not(.text-card) { 
    background:#1a5276; 
    color:#fff; 
  }
  
  .card.hidden { background:#ecf0f1; }
  .card.matched { opacity:0; transform:scale(0.8); transition:0.6s; }
  
  .text { 
    padding:10px; 
    text-align:center; 
    width:100%; 
    height:100%;
    display:flex;
    flex-direction:column;
    justify-content:center;
  }
  .text strong { display:block; font-size:1em; }
  .text span { font-size:0.8em; opacity:0.8; }
  
  .missing { 
    color:#e74c3c; 
    font-size:0.8em; 
    display:flex; 
    flex-direction:column; 
    justify-content:center; 
    height:/images/100%; 
    background:#fff;
  }
  
  #win { 
    display:none; 
    flex-direction:column; 
    align-items:center; 
    justify-content:center; 
    position:fixed; 
    top:0; left:0; 
    width:100%; height:100%; 
    background:rgba(26,82,118,0.95); 
    z-index:100; 
    padding:20px; 
  }
  #win h2 { font-size:3em; margin:20px 0; }
  #finalTime { font-size:1.8em; margin:15px 0; }
  
  #leaderboard { 
    background:rgba(255,255,255,0.95); 
    color:#1a5276; 
    padding:25px; 
    border-radius:16px; 
    max-width:400px; 
    width:100%; 
    margin:20px auto; 
  }
  #leaderboard strong { display:block; margin-bottom:15px; font-size:1.3em; }
  #leaderboardList { list-style:none; }
  #leaderboardList li { 
    margin:10px 0; 
    padding:10px; 
    background:#f8f9fa; 
    border-radius:8px; 
    border-left:4px solid #1a5276; 
  }
  
  input { 
    padding:12px; 
    font-size:1.1em; 
    width:80%; 
    max-width:300px; 
    margin:15px 0; 
    border-radius:8px; 
    border:none; 
  }
  button { 
    padding:12px 30px; 
    background:#ff6b6b; 
    color:white; 
    border:none; 
    border-radius:8px; 
    font-size:1.1em; 
    cursor:pointer; 
    margin:10px; 
    box-shadow:0 4px 12px rgba(0,0,0,0.2); 
  }
  button:disabled { background:#95a5a6; cursor:not-allowed; }
  
 @media (max-width: 1100px) {
  .card { flex: 0 0 calc(16.666% - 12px); } /* 6-col on tablets */
}

@media (max-width: 900px) {
  .card { flex: 0 0 calc(20% - 12px); } /* 5-col tablets */
  .card .text strong { font-size: 1.35em; }
}

@media (max-width: 700px) {
  .card { flex: 0 0 calc(25% - 12px); } /* 4-col phones */
  .card .text strong { font-size: 1.25em; }
  .card .text span { font-size: 0.8em; }
}

@media (max-width: 500px) {
  .card { flex: 0 0 calc(33.333% - 12px); } /* 3-col small phones */
  .card .text { padding: 16px; }
}
</style>

</head>
<body>
  <h1>Boardroom Blitz: Ultimate Memory Match</h1>
  <div id="timer">Time: 0s</div>
  <div id="game"></div>

  <div id="win">
    <h2>YOU WIN!</h2>
    <div id="finalTime"></div>
    <input type="text" id="playerName" placeholder="Your Name" maxlength="20" />
    <button id="saveScore">Save Score</button>
    <div id="leaderboard">
      <strong>Leaderboard (Top 10)</strong>
      <ul id="leaderboardList"><li>Loading...</li></ul>
    </div>
    <button onclick="location.reload()">Play Again</button>
  </div>

  <audio id="winnerMusic" src="https://cdn.jsdelivr.net/gh/tonetheman/winner@v1.0.0/winner.mp3" preload="auto"></audio>

  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
  <script type="module">
    const firebaseConfig = {
      apiKey: "AIzaSyC0UwDJgS2ZzNgVn9axmdWN6FSVxihgZe8",
      authDomain: "boardroom-blitz-leaderboard.firebaseapp.com",
      projectId: "boardroom-blitz-leaderboard",
      storageBucket: "boardroom-blitz-leaderboard.firebasestorage.app",
      messagingSenderId: "54754880904",
      appId: "1:54754880904:web:b594cf6fcab889d922de3d",
      measurementId: "G-V11RN0QEP7"
    };

    import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
    import { getFirestore, collection, addDoc, getDocs, query, orderBy, limit } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    const CSV_DATA = `Name,Company
Sarah Ballard,American Cancer Society
Victoria Brown,Elemental Advisors
Colbie Campbell,Slates Harwell Campbell LLP
Leigh-Ann Carney,DFPS
Casey Colosky,Stonebriar Village
Melanie Daugherty,Culture Space
Amy Derrick,Dallas County District Attorney
Bill Eifert,AT&T
Travis Ewert,Colliers
Leah Ewing,Sumsol LLC
Chief Griffith,Dallas Police Department
David Gunderson,Cosair Ventures
Kirsten Hill,KPMG
Steve Martin,Frost Bank
Rafael Maya,PWC
Michael Moghtader,Amawaterways
Toby Moon,Oportun
Valencia Nash,Justice of the Peace
Corbett Nichter,The MAPP Group
Bill Richmond,Platt Cheema Richmond
Katie Samler,Goranson Bain Ausley
Erin Schumacher,Cambridge Associates
Michael Simmons,Ulta Beauty
John Slates,Slates Harwell Campbell
Clayton Sporich,Tap Rock Resources
Ellis Thomas,The Stream Foundation
Ashley Zickefoose,Dave & Busters`;

    const IMG_EXT = '.png';
    let cards = [], selected = [], lock = false, startTime, timerId;
    const gameDiv = document.getElementById('game');
    const winDiv = document.getElementById('win');
    const finalTimeEl = document.getElementById('finalTime');
    const leaderboardList = document.getElementById('leaderboardList');
    const saveScoreBtn = document.getElementById('saveScore');
    const playerNameInput = document.getElementById('playerName');
    const winnerMusic = document.getElementById('winnerMusic');

    async function saveScore(name, time) {
      try {
        await addDoc(collection(db, 'scores'), { name, time, date: new Date() });
      } catch (e) {
        console.error('Save failed:', e);
        let scores = JSON.parse(localStorage.getItem('memoryLeaderboard') || '[]');
        scores.push({ name, time });
        scores.sort((a, b) => a.time - b.time);
        scores = scores.slice(0, 10);
        localStorage.setItem('memoryLeaderboard', JSON.stringify(scores));
      }
    }

    async function loadLeaderboard() {
      try {
        const q = query(collection(db, 'scores'), orderBy('time'), limit(10));
        const snapshot = await getDocs(q);
        const scores = snapshot.docs.map(doc => doc.data());
        leaderboardList.innerHTML = scores.length
          ? scores.map(s => `<li><strong>${s.name}</strong> — ${s.time}s</li>`).join('')
          : '<li>No scores yet!</li>';
      } catch (e) {
        const scores = JSON.parse(localStorage.getItem('memoryLeaderboard') || '[]');
        leaderboardList.innerHTML = scores.length
          ? scores.map(s => `<li><strong>${s.name}</strong> — ${s.time}s</li>`).join('')
          : '<li>No scores yet!</li>';
      }
    }

    function safeName(name) { return name.replace(/[\/\\:*?"<>|]/g, '').replace(/\s+/g, '_'); }

   CSV_DATA.trim().split('\n').slice(1).forEach((line, i) => {
  const [name, company] = line.split(',').map(s => s.trim());
  const img = 'images/' + safeName(name) + '.png';  // FIXED PATH
  cards.push({id: i, type: 'photo', img, name, company});
  cards.push({id: i, type: 'text', img, name, company});
});

    function shuffle(a) { for (let i = a.length - 1; i > 0; i--) { const j = Math.floor(Math.random() * (i + 1)); [a[i], a[j]] = [a[j], a[i]]; } }
    shuffle(cards);
    render();
    startTimer();

    function render() {
      gameDiv.innerHTML = '';
      cards.forEach(c => {
        const card = document.createElement('div');
        card.className = 'card visible';
        card.dataset.id = c.id;
        card.dataset.type = c.type;
        if (c.type === 'photo') {
          const img = document.createElement('img');
          img.src = c.img;
          img.alt = c.name;
          img.onerror = () => card.innerHTML = `<div class="missing">MISSING<br><small>${c.img}</small></div>`;
          card.appendChild(img);
        } else {
          card.innerHTML = `<div class="text"><strong>${c.name}</strong><span>${c.company}</span></div>`;
          card.classList.add('text-card');
        }
        card.onclick = () => flip(card);
        gameDiv.appendChild(card);
      });
    }

    function flip(card) {
      if (lock || card.classList.contains('hidden') || card.classList.contains('matched')) return;
      card.classList.remove('visible'); card.classList.add('hidden'); card.innerHTML = ''; selected.push(card);
      if (selected.length === 2) {
        lock = true;
        const [a, b] = selected;
        if (a.dataset.id === b.dataset.id && a.dataset.type !== b.dataset.type) {
          setTimeout(() => {
            a.classList.add('matched'); b.classList.add('matched');
            setTimeout(() => { a.remove(); b.remove(); checkWin(); }, 600);
            selected = []; lock = false;
          }, 700);
        } else {
          setTimeout(() => {
            a.classList.remove('hidden'); a.classList.add('visible');
            b.classList.remove('hidden'); b.classList.add('visible');
            renderCardContent(a); renderCardContent(b);
            selected = []; lock = false;
          }, 1200);
        }
      }
    }

    function renderCardContent(card) {
      const data = cards.find(c => c.id == card.dataset.id && c.type === card.dataset.type);
      if (!data) return;
      if (data.type === 'photo') {
        const img = document.createElement('img');
        img.src = data.img; img.alt = data.name;
        card.appendChild(img);
      } else {
        card.innerHTML = `<div class="text"><strong>${data.name}</strong><span>${data.company}</span></div>`;
      }
    }

    function checkWin() {
      if (gameDiv.children.length === 0) {
        clearInterval(timerId);
        const secs = Math.round((Date.now() - startTime)/1000);
        finalTimeEl.textContent = `Completed in ${secs} seconds!`;
        confetti({ particleCount: 200, spread: 100, origin: { y: 0.6 } });
        winnerMusic.play().catch(() => {});
        winDiv.style.display = 'flex';
        loadLeaderboard();
        setupSaveScore(secs);
      }
    }

    function setupSaveScore(secs) {
      saveScoreBtn.onclick = async () => {
        let name = playerNameInput.value.trim() || 'Anonymous';
        await saveScore(name, secs);
        playerNameInput.value = '';
        await loadLeaderboard();
        saveScoreBtn.disabled = true;
        saveScoreBtn.textContent = 'Saved Globally!';
      };
    }

    function startTimer() {
      startTime = Date.now();
      timerId = setInterval(() => {
        const secs = Math.round((Date.now() - startTime)/1000);
        document.getElementById('timer').textContent = `Time: ${secs}s`;
      }, 500);
    }
  </script>
</body>
</html>







